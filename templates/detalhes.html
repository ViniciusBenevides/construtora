{% extends "base.html" %}

{% block title %}Detalhes do Imóvel {{ imovel.codigo }}{% endblock %}

{% block content %}

    <a href="javascript:history.back()" style="display: inline-block; margin-bottom: 20px; color: #007bff; text-decoration: none;">&larr; Voltar para a Busca</a>

    <div style="background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 15px rgba(0,0,0,0.1);">
        
        <h1 style="color: #333;">{{ imovel.tipo_imovel }} em {{ imovel.bairro }}</h1>
        <p style="font-size: 1.1em; color: gray;">
            Código: <strong>{{ imovel.codigo }}</strong> | {{ imovel.cidade }}
        </p>

        <div style="display: flex; justify-content: space-between; align-items: center; margin: 20px 0; border-bottom: 1px solid #eee; padding-bottom: 20px;">
            <h2 style="color: #28a745; font-size: 2.5em; margin: 0;">
                R$ {{ "%.2f"|format(imovel.valor) }}
            </h2>
            <span style="background-color: #007bff; color: white; padding: 8px 15px; border-radius: 5px; font-weight: bold;">
                Status: {{ imovel.status }}
            </span>
        </div>

        <h3>Características Principais</h3>
        <ul style="list-style: none; padding: 0; display: flex; flex-wrap: wrap; gap: 40px; font-size: 1.1em;">
            <li><strong>Quartos:</strong> {{ imovel.quartos }}</li>
            <li><strong>Banheiros:</strong> {{ imovel.banheiros }}</li>
            <li><strong>Vagas de Garagem:</strong> {{ imovel.vagas }}</li>
            <li><strong>Área Total:</strong> {{ imovel.area_m2 }} m²</li>
        </ul>
        
        <h3 style="margin-top: 30px;">Descrição e Informações Adicionais</h3>
        <p style="line-height: 1.6; color: #555;">
            *Esta é a área para a descrição detalhada do imóvel.* Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </p>

        <h3 style="margin-top: 30px;">Galeria</h3>
        <div style="text-align: center; border: 1px solid #eee; padding: 20px; border-radius: 8px;">
            <img src="{{ url_for('static', filename='fotos_imoveis/' + imovel.foto_principal) }}" 
                 alt="Foto Principal" 
                 style="max-width: 100%; height: auto; max-height: 400px; border-radius: 5px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
            <p>Foto Principal (o sistema pode ser expandido para múltiplas fotos aqui)</p>
        </div>

        {% if current_user.is_authenticated and current_user.funcao == 'Admin' %}
            <h3 style="margin-top: 30px; color: #dc3545;">Área de Administração</h3>
            <div style="border-top: 1px solid #eee; padding-top: 20px; display: flex; gap: 15px;">
                
                <a href="{{ url_for('editar_imovel', codigo=imovel.codigo) }}" style="padding: 10px 20px; background-color: #ffc107; color: #333; text-decoration: none; border-radius: 5px;">
                    &#x270E; Editar Imóvel
                </a>
                
                <form method="POST" action="{{ url_for('excluir_imovel', codigo=imovel.codigo) }}" 
                    onsubmit="return confirm('ATENÇÃO: Deseja realmente excluir o imóvel {{ imovel.codigo }}? Esta ação é irreversível.');">
                    <button type="submit" style="padding: 10px 20px; background-color: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        &#x2716; Excluir Imóvel
                    </button>
                </form>
            </div>
        {% endif %}
    </div>

{% endblock %}